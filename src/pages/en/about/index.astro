---
/**
 * About Page (English) - Portfolio Style
 * Includes JSON-LD Person for disambiguation and authority
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/layout/Navbar.astro';
import ArticleCard from '@/components/blog/ArticleCard.astro';
import { getLocalizedPosts } from '@/lib/content';
import { useTranslations } from '@/lib/i18n/translations';
import { SITE } from '@/consts/site';
import { buildSiteGraph, buildWebPageSchema } from '@/lib/seo/structuredData';
import { canonicalFromPath } from '@/lib/seo/url';
import { sortPostsByDate } from '@/lib/utils';

const t = useTranslations('en');
const baseUrl = '/en';

const title = t.nav.about;
const description = t.about.bio;
const canonicalUrl = canonicalFromPath('/en/about/', new URL(SITE.url)).toString();

// Fetch latest posts
const allPosts = await getLocalizedPosts('en');
const latestPosts = sortPostsByDate(allPosts).slice(0, 3);

// JSON-LD: site graph + WebPage
const siteGraph = buildSiteGraph();
const webPage = buildWebPageSchema({
  canonicalUrl,
  title,
  description,
});

const jsonLd = {
  '@context': 'https://schema.org',
  '@graph': [...siteGraph['@graph'], webPage],
};
---

<BaseLayout
  title={title}
  description={description}
  canonical={canonicalUrl}
  jsonLd={jsonLd}
  locale="en"
>
  <div class="w-full max-w-[1600px] mx-auto p-4 md:p-6">
    <div class="bg-surface-container-low rounded-[40px] px-6 pt-2 pb-16 relative overflow-hidden elevation-0">
      <Navbar locale="en" />

      <div class="mt-12 max-w-4xl mx-auto md:px-12 relative z-10">
        <h1 class="text-display-small md:text-display-medium font-bold text-on-surface mb-6">
          {t.about.title}
        </h1>
        <p class="text-headline-small text-on-surface-variant mb-8">
          {t.about.role}
        </p>

        <div class="prose prose-lg max-w-none">
          <p class="text-body-large text-on-surface-variant leading-relaxed mb-12">
            {t.about.bio}
          </p>

          <h2 class="text-headline-medium font-bold text-on-surface mt-12 mb-6">
            Get in Touch
          </h2>
          <p class="text-body-large text-on-surface-variant leading-relaxed mb-4">
            Feel free to connect with me on social media or check out my work on GitHub.
          </p>
          <div class="flex gap-4">
            <a
              href="https://github.com/ireneburresi"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 px-4 py-2 shape-full bg-surface-container text-on-surface state-layer button-state elevation-1 hover:elevation-2"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
                <path d="M9 18c-4.51 2-5-2-7-2"></path>
              </svg>
              GitHub
            </a>
            <a
              href="https://linkedin.com/in/ireneburresi"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 px-4 py-2 shape-full bg-surface-container text-on-surface state-layer button-state elevation-1 hover:elevation-2"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                <rect width="4" height="12" x="2" y="9"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
              LinkedIn
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  {latestPosts.length > 0 && (
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <h2 class="text-2xl font-bold mb-8 text-on-surface">{t.ui.latestArticles}</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {latestPosts.map((post) => (
          <ArticleCard post={post} locale="en" />
        ))}
      </div>
    </section>
  )}
</BaseLayout>
